(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cb879d00"],{"212b":function(t,e,a){},"2c85":function(t,e,a){},"525a":function(t,e,a){"use strict";a("2c85")},"5d3f":function(t,e,a){"use strict";a("212b")},"5fd4":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"a",(function(){return s}));var i=a("5b6b"),n=(a("bc3a"),a("7c9b"),"/api/dashboard");function r(t){return Object(i["a"])({url:"".concat(n),method:"get",params:t})}function s(t){return Object(i["a"])({url:"".concat(n,"/sale"),method:"get",params:t})}},"7c9b":function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return o}));a("4160"),a("caad"),a("4fad"),a("b64b"),a("2532"),a("159b");var i=a("3835"),n=a("5530");function r(t,e){var a=Object(n["a"])({},e);return Object.keys(a).forEach((function(e){t.includes(e)&&delete a[e]})),a}function s(t,e){var a=Object(n["a"])({},e);return Object.keys(a).forEach((function(e){t.includes(e)||delete a[e]})),a}function o(t,e){for(var a=0,n=Object.entries(e);a<n.length;a++){var r=Object(i["a"])(n[a],2),s=r[0],o=r[1];t[o]=t[s],delete t[s]}return t}},9517:function(t,e,a){"use strict";a("4160"),a("c975"),a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("4d90"),a("5319"),a("1276"),a("159b"),a("53ca");function i(t,e,a){var i,n,r,s,o,c=function c(){var d=+new Date-s;d<e&&d>0?i=setTimeout(c,e-d):(i=null,a||(o=t.apply(r,n),i||(r=n=null)))};return function(){for(var n=arguments.length,d=new Array(n),u=0;u<n;u++)d[u]=arguments[u];r=this,s=+new Date;var h=a&&!i;return i||(i=setTimeout(c,e)),h&&(o=t.apply(r,d),r=d=null),o}}e["a"]={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){var t=this;this.$_resizeHandler=i((function(){t.chart&&t.chart.resize()}),100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}}},cadb:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return s}));var i=new Intl.DateTimeFormat("id-ID",{timeZone:"Asia/Ho_Chi_Minh"});function n(t){if(void 0!==t&&""!==t&&null!==t){var e=Date.parse(t),a=i.format(e);return a}return""}var r={month:30,week:7,day:1};function s(t,e){var a=new Date,i=new Date,n=t*r[e];return i.setDate(a.getDate()-n),i}},db1c:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-editor-container"},[a("line-multi-pie-chart",{attrs:{data:t.chartData,"x-axis":t.lineChartXAxis}})],1)},n=[],r=(a("99af"),a("4160"),a("d81d"),a("159b"),a("2909")),s=(a("96cf"),a("1da1")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-editor-container",style:{width:t.width}},[a("el-row",{attrs:{gutter:12}},[a("el-col",{attrs:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:12},xl:{span:12}}},[a("div",{staticClass:"chart-wrapper"},[t.leadPieChartOptions?a("resize-chart",{attrs:{options:t.leadPieChartOptions}}):t._e()],1)]),a("el-col",{attrs:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:12},xl:{span:12}}},[a("div",{staticClass:"chart-wrapper"},[t.productPieChartOptions?a("resize-chart",{attrs:{options:t.productPieChartOptions}}):t._e()],1)])],1),a("div",{staticClass:"chart-wrapper"},[a("resize-chart",{attrs:{options:t.lineChartOptions,height:"400px"},on:{mouseOver:t.handleMouseOver}})],1)],1)},c=[],d=(a("b64b"),a("15fd")),u=(a("ef97"),a("c037"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-chart",{class:t.className,style:{height:t.height,width:t.width},attrs:{options:t.options},on:{mouseover:t.handleMouseOver}})}),h=[],l=a("9ca8e"),p=a("9517"),f={name:"ResizeChart",components:{"v-chart":l["a"]},mixins:[p["a"]],props:{title:{type:String,default:""},className:{type:String,default:""},width:{type:String,default:"100%"},height:{type:String,default:"250px"},autoResize:{type:Boolean,default:!0},options:{type:Object,required:!0}},data:function(){return{}},created:function(){},methods:{handleMouseOver:function(t){this.$emit("mouseOver",t)}}},v=f,m=a("2877"),b=Object(m["a"])(v,u,h,!1,null,null,null),O=b.exports,C={0:"cubicInOut",1:"quadraticOut",2:"linear"},y=function(){var t=Math.floor(3*Math.random());return C[t]},E={name:"LineMultiPieChart",components:{ResizeChart:O},props:{height:{type:String,default:"300px"},width:{type:String,default:"100%"},data:{type:Object,required:!0},xAxis:{type:Array,default:function(){return[]}}},data:function(){return{lineChartOptions:void 0,leadPieChartOptions:void 0,productPieChartOptions:void 0,dimension:0}},watch:{data:{deep:!0,handler:function(t){this.setOptions(t)}}},created:function(){this.setOptions(this.data)},methods:{handleMouseOver:function(t){var e=t.dataIndex;if(e!==this.dimension){var a=this.data,i=a.leadPieChartData,n=a.productPieChartData;this.dimension=e,this.setLeadPieChartOptions(i),this.setProductPieChartOptions(n)}},setLineChartOptions:function(t){var e=this.parseLineData(t),a=e.series,i=e.legend;this.lineChartOptions={title:{text:"",padding:[0,5]},xAxis:{data:this.xAxis,boundaryGap:!1,axisTick:{show:!1}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,10]},yAxis:{axisTick:{show:!1}},legend:{data:i,icon:"rect",itemGap:20,left:"4%",textStyle:{fontSize:14}},series:a}},parseLineData:function(t){var e=Object.keys(t),a=e.map((function(e){return{name:e,smooth:!0,type:"line",itemStyle:{normal:{lineStyle:{width:5},areaStyle:{color:"#f3f8ff"}}},data:t[e],animationDuration:2e3,animationEasing:y(),symbolSize:10}}));return{series:a,legend:e}},labelFormatter:function(t){var e=t.data,a=t.percent,i=t.encode,n=i.value[0],r=e[n],s=e[0],o="".concat(s,": ").concat(r," (").concat(a,"%)");return 0===r?"":o},setLeadPieChartOptions:function(t){var e=this.dimension+1;if(void 0!==t){var a=t[0][0];this.leadPieChartOptions={legend:{show:!0},dataset:{source:t},series:[{type:"pie",id:"pie",radius:"50%",center:["50%","50%"],label:{formatter:this.labelFormatter,fontSize:16},encode:{itemName:a,value:e,tooltip:e}}]}}},setProductPieChartOptions:function(t){var e=this.dimension+1;if(void 0!==t){var a=t[0][0];this.productPieChartOptions={legend:{show:!0},dataset:{source:t},series:[{type:"pie",id:"pie",radius:"50%",center:["50%","50%"],label:{formatter:this.labelFormatter,fontSize:16},encode:{itemName:a,value:e,tooltip:e}}]}}},setOptions:function(t){var e=t.leadPieChartData,a=t.productPieChartData,i=Object(d["a"])(t,["leadPieChartData","productPieChartData"]);this.setLineChartOptions(i),this.setLeadPieChartOptions(e),this.setProductPieChartOptions(a)}}},g=E,w=(a("525a"),Object(m["a"])(g,o,c,!1,null,"f6afcbb0",null)),D=w.exports,_=a("cadb"),z=a("7c9b"),P=a("5fd4"),x={name:"SalesDashboard",components:{LineMultiPieChart:D},data:function(){return{chartData:{},lineChartXAxis:void 0,list:void 0,productOptions:[],leadOptions:[],listLoading:!0,listQuery:void 0}},created:function(){this.listQuery={from:Object(_["a"])(7,"month"),to:new Date},this.fetchData()},methods:{fetchData:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,i,n,r,s,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(P["a"])(t.listQuery);case 2:a=e.sent,i=a.data,n=i.totalResult,r=i.resultProduct,s=i.resultLead,o=i.productOptions,c=i.leadOptions,t.productOptions=o,t.leadOptions=c,t.prepareData(n,r,s);case 7:case"end":return e.stop()}}),e)})))()},prepareData:function(t,e,a){var i=t.map((function(t){var e=t.time;return e}));this.lineChartXAxis=i.map((function(t){return Object(_["b"])(t)})),this.chartData=this.prepareChartData(t,e,a),this.listLoading=!1},prepareChartData:function(t,e,a){var i="Tổng số khách hàng",n={};n[i]=[],this.productOptions.forEach((function(t){n[t]=[]})),this.leadOptions.forEach((function(t){n[t]=[]})),n.productPieChartData=[["time"]],n.leadPieChartData=[["time"]],t.forEach((function(t){n[i].push(t.result)})),e.forEach((function(t){t.products.forEach((function(t){var e=t.product,a=t.result;n[e].push(a)})),n.productPieChartData[0].push(t.time),n.leadPieChartData[0].push(t.time)})),a.forEach((function(t){t.leads.forEach((function(t){var e=t.lead,a=t.result;n[e].push(a)}))})),this.productOptions.forEach((function(t){var e=[t];n[t].forEach((function(t){e.push(t)})),n.productPieChartData.push(e)})),this.leadOptions.forEach((function(t){var e=[t];n[t].forEach((function(t){e.push(t)})),n.leadPieChartData.push(e)}));var s=[].concat(Object(r["a"])(this.productOptions),Object(r["a"])(this.leadOptions)),o=Object(z["a"])(s,n);return o},handleRangeChange:function(t){this.listQuery={from:t[0],to:t[1]}},handleFilter:function(){this.fetchData()}}},$=x,j=(a("5d3f"),Object(m["a"])($,i,n,!1,null,"004a1ac2",null));e["default"]=j.exports}}]);